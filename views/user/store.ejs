
<header>
  <%-include('../partials/header.ejs') %>
</header>
<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Modal title</h5>
        <button type="button" class="btn-close" data-mdb-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <!-- Modal body content goes here -->
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-mdb-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary">Save changes</button>
      </div>
    </div>
  </div>
</div>
<section class="">
  <div class="container">
    <div class="row">
      <!-- sidebar -->
      <div class="col-lg-3 mt-5">
        <!-- Toggle button -->
        <button class="btn btn-outline-secondary mb-3 w-100 d-lg-none" type="button" data-mdb-toggle="collapse"
          data-mdb-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false"
          aria-label="Toggle navigation">
          <span>Show filter</span>
        </button>
        <!-- Collapsible wrapper -->
        <div class="collapse card d-lg-block mb-5" id="navbarSupportedContent">
          <div class="accordion" id="accordionPanelsStayOpenExample">
            <div class="accordion-item">
              <h2 class="accordion-header" id="headingOne">
                <button class="accordion-button text-dark bg-light" type="button" data-mdb-toggle="collapse"
                  data-mdb-target="#panelsStayOpen-collapseOne" aria-expanded="true"
                  aria-controls="panelsStayOpen-collapseOne">
                  Shop By Categories
                </button>
              </h2>
              <div id="panelsStayOpen-collapseOne" class="accordion-collapse collapse show"
                aria-labelledby="headingOne">
                <div class="accordion-body">
                  <ul class="list-unstyled">
                    <li><a href="/allproducts" class="text-dark">All</a></li>
                    <% categories.forEach((category)=>{ %>
                      <li>
                        <a href="/allproducts?category=<%=category.categoryName%>" class="text-dark">
                          <%=category.categoryName%>
                        </a>
                      </li>
                      <% }) %>

                  </ul>
                </div>
              </div>
            </div>

            <div class="accordion-item">
              <h2 class="accordion-header" id="headingTwo">
                <button class="accordion-button text-dark bg-light" type="button" data-mdb-toggle="collapse"
                  data-mdb-target="#panelsStayOpen-collapseTwo" aria-expanded="true"
                  aria-controls="panelsStayOpen-collapseTwo">
                  Brands
                </button>
              </h2>
              <div id="panelsStayOpen-collapseTwo" class="accordion-collapse collapse show"
                aria-labelledby="headingTwo">
                <div class="accordion-body">
                  <div>

                    <div class="form-check">
                      <input class="form-check-input" type="checkbox" value="" />
                      <label class="form-check-label" for="checkbox_">
                      </label>

                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div class="accordion-item">
              <h2 class="accordion-header" id="headingThree">
                <button class="accordion-button text-dark bg-light" type="button" data-mdb-toggle="collapse"
                  data-mdb-target="#panelsStayOpen-collapseThree" aria-expanded="false"
                  aria-controls="panelsStayOpen-collapseThree">
                  Price
                </button>
              </h2>
              <div id="panelsStayOpen-collapseThree" class="accordion-collapse collapse show"
                aria-labelledby="headingThree">
                <div class="accordion-body">
                  <!-- <div class="range">
                    <input type="range" class="form-range" id="customRange1" />
                  </div> -->
                  <input type="hidden" name="page" value=">">

                  <form action="" id="fromPrice">

                    <div class="row mb-3">
                      <div class="col-6">
                        <p class="mb-0">
                          Min
                        </p>
                        <div class="form-outline">
                          <input type="number" name="minPrice" id="typeNumber" class="form-control minPrice" value="" />
                          <label class="form-label" for="typeNumber">Min Price</label>
                        </div>
                      </div>
                      <div class="col-6">
                        <p class="mb-0">
                          Max
                        </p>
                        <div class="form-outline">
                          <input type="number" name="maxPrice" id="typeNumber" class="form-control maxPrice" value="" />
                          <label class="form-label" for="typeNumber">Max Price</label>
                        </div>
                      </div>
                    </div>
                    <button type="submit" class="btn btn-white w-100 border border-secondary">apply</button>
                  </form>

                </div>
              </div>
            </div>


          </div>
        </div>
      </div>
      <!-- sidebar -->
      <!-- content -->
      <div class="col-lg-9">
        <header class="d-sm-flex align-items-center border-bottom mb-4 pb-3">
          <!-- <strong class="d-block py-2">32 Items found </strong> -->
          <div class="ms-auto">
            <select class="form-select d-inline-block w-auto border pt-1">
              <option value="0">Best match</option>
              <option value="1">Recommended</option>
              <option value="2">High rated</option>
              <option value="3">Randomly</option>
            </select>

          </div>
        </header>

        <div class="row">
          <% products.forEach((product)=>{ %>
          <% let discount  = product.discount %>
          <% let price = product.price %>
          <% let discountedPrice = parseInt(price - (price * discount/100)) %>

          <div class="col-lg-4 col-md-6 col-sm-12 mb-4 product">
            <div class="card h-100 position-relative">
              <a href="#" onclick="addToWhislist('<%=product._id%>')" class="wishlist-icon position-absolute top-0 end-0 mt-2 ps-2 pe-2 " data-product-id="<%=product._id%>" id="wish<%=product._id%>" style=" font-size: 20px; color: rgb(185, 185, 185); "><i class="fas fa-heart"></i></a>


               <% if(discountedPrice>0) {%>
               
                  <div class="discount-badge position-absolute top-0 start-0 mt-2   px-2 py-1"
                    style="background-color: #febd69; color: #131921; border-radius: 90px;margin-left: 8px; font-weight: bolder;font-size:x-small;">
                   <%=discount%> % OFF
                  </div>
              <% }%>
              <img src="/uploads/products/<%=product.image[0] %>" class="card-img-top main-image"
              style="aspect-ratio: 1 / 1" />
            <img src="/uploads/products/<%=product.image[1] %>" class="card-img-top  hover-image"
              style="aspect-ratio: 1 / 1 ;display: none;" />

            <div style="padding-bottom: 0;" class="card-body d-flex flex-column justify-content-center pt-1">
              <h5 class="card-text" style="color: #000000; text-align: center;">
                <%=product.name%>
                </ h5>
              </div>
                
              <div style="display: flex; align-items: center; gap: 1rem; justify-content: center; margin: 1rem 0;">
              <p style="padding: 0; margin: 0;  text-decoration: line-through;color: red;">₹<%=product.price%></p>

              <p class="card-text" style="font-weight: 400;font-size: 18px;letter-spacing: .3px; color: #1c1b1b;font-family: 'Rubik', sans-serif">
                ₹<%=discountedPrice%>
              </p>
              
            </div>
            <div class=" d-flex align-items-center justify-content-center pb-3 px-0 pb-0 mt-auto">
              <a href="#!" class="btn btn-primary shadow-0 me-1" style="background-color: black;">Add to cart</a>
          </div>
      </div>
    </div>
              <% }) %>
        </div>
        <hr />
      </div>


      <!-- Pagination -->
      <!-- Pagination -->


      <nav aria-label="Page navigation example" class="d-flex justify-content-center mt-3">
        <ul class="pagination">
          <li class="page-item ">
            <a class="page-link" href="/products?page=" aria-label="Previous">
              <span aria-hidden="true">&laquo;</span>
            </a>
          </li>


          <li class="page-item ">
            <a class="page-link" href="/products?page=">

            </a>
          </li>


          <li class="page-item ">
            <a class="page-link" href="/products?page=" aria-label="Next">
              <span aria-hidden="true">&raquo;</span>
            </a>
          </li>
        </ul>
      </nav>
      <!-- Pagination -->

      <!-- Pagination -->
    </div>
  </div>
  </div>
</section>
<!-- Footer -->
<footer>
  <%- include('../partials/footer.ejs') %>
</footer>
</body>

</html>